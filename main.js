(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._host=e,this._token=n,this._getHeaders=this._getHeaders.bind(this)}var n,r;return n=t,(r=[{key:"_getHeaders",value:function(){return{authorization:this._token,"content-type":"application/json"}}},{key:"_getJsonOrError",value:function(){return res.ok?res.json():Promise.reject("Ошибка: ".concat(res.status))}},{key:"getInitialCards",value:function(){return this._cards=fetch("".concat(this._url,"/cards"),{headers:this._getHeaders()}).then(this._getJsonOrError),this._cards}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t.name,this._link=t.link,this._selector=n,this._openImage=r}var t,r;return t=e,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._selector).content.querySelector(".element").cloneNode(!0)}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._imageElement=this._element.querySelector(".element__image"),this._setEventListeners(),this._imageElement.src=this._link,this._imageElement.alt=this._name,this._element.querySelector(".element__city").textContent=this._name,this._element}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".element__like").addEventListener("click",(function(){e._handleLikeClick()})),this._element.querySelector(".element__delete").addEventListener("click",(function(){e._handleDeleteClick()})),this._element.querySelector(".element__image").addEventListener("click",(function(){e._openImage(e._name,e._link)}))}},{key:"_handleLikeClick",value:function(){this._element.querySelector(".element__like").classList.toggle("element__like_active")}},{key:"_handleDeleteClick",value:function(){this._element.remove(),this._element=null}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formElement=t,this._dataElement=n,this._inputList=Array.from(t.querySelectorAll(this._dataElement.inputSelector)),this._buttonElement=this._formElement.querySelector(this._dataElement.submitButtonSelector)}var t,n;return t=e,(n=[{key:"_showInputError",value:function(e,t){var n=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.add(this._dataElement.inputErrorClass),n.textContent=t,n.classList.add(this._dataElement.errorClass)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.remove(this._dataElement.inputErrorClass),t.textContent="",t.classList.remove(this._dataElement.errorClass)}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_validateInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._validateInput()?(this._buttonElement.classList.add(this._dataElement.inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._dataElement.inactiveButtonClass),this._buttonElement.disabled=!1)}},{key:"_setEventListeners",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}},{key:"resetValidation",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){e._hideInputError(t)}))}},{key:"disabledButton",value:function(){this._buttonElement.classList.add(this._dataElement.inactiveButtonClass),this._buttonElement.disabled=!0}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=r,this._renderer=o,this._container=n}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"renderItem",value:function(){var e=this;this._renderedItems.forEach((function(t){e._renderer(t)}))}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=t,this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("mousedown",(function(t){(t.target.classList.contains("popup_opened")||t.target.classList.contains("popup__button-close"))&&e.close()}))}}])&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(){return f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=d(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},f.apply(this,arguments)}function d(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function _(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(r);if(o){var n=h(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return _(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._name=t._popup.querySelector(".popup__caption"),t._link=t._popup.querySelector(".popup__image-src"),t}return t=a,(n=[{key:"open",value:function(e,t){this._link.src=t,this._link.alt=e,this._name.textContent=e,f(h(a.prototype),"open",this).call(this)}}])&&p(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(s);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=k(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},g.apply(this,arguments)}function k(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}function E(e,t){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},E(e,t)}function w(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=S(r);if(o){var n=S(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return w(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e))._form=n._popup.querySelector(".popup__form"),n._inputs=n._form.querySelectorAll(".popup__input"),n._submitForm=t,n}return t=a,(n=[{key:"_getInputValues",value:function(){var e={};return this._inputs.forEach((function(t){e[t.name]=t.value})),e}},{key:"setEventListeners",value:function(){var e=this;g(S(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._submitForm(e._getInputValues()),e.close()}))}},{key:"close",value:function(){g(S(a.prototype),"close",this).call(this),this._form.reset()}}])&&b(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(s);function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var C=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(t.nameSelector),this._about=document.querySelector(t.aboutSelector)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,about:this._about.textContent}}},{key:"setUserInfo",value:function(e){this._name.textContent=e.name,this._about.textContent=e.about}}])&&j(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),L=(document.querySelectorAll(".popup"),document.querySelector(".popup_profile")),P=document.querySelector(".popup_new-card"),q=document.querySelector(".popup_image"),I=document.querySelector(".profile__button-edit"),x=document.querySelector(".profile__button-edd"),R=document.querySelector(".elements"),B=document.querySelector(".popup__form"),T=document.querySelector(".popup__form_new-card"),V=B.querySelector(".popup__input-name"),D=B.querySelector(".popup__input-about"),A={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error-visible"},H=new t({host:"https://mesto.nomoreparties.co/v1/cohort-47",token:"57fe7532-adaf-4e02-b40f-30da1bce78cd"}),U=function(e,t){z.open(e,t)},z=new m(q);z.setEventListeners();var F=function(e){return new r(e,"#element-template",U).generateCard()},J=new u({items:[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],renderer:function(e){var t=F(e);J.addItem(t)}},R),M=new i(B,A),N=new i(T,A);M.enableValidation(),N.enableValidation();var G=new C({nameSelector:".profile__user-name",aboutSelector:".profile__user-about"}),K=new O(L,(function(e){G.setUserInfo(e)}));K.setEventListeners(),I.addEventListener("click",(function(){K.open();var e=G.getUserInfo();V.value=e.name,D.value=e.about,M.resetValidation(),M.disabledButton()}));var Q=new O(P,(function(e){var t=F(e);J.addItem(t),Q.close()}));Q.setEventListeners(),x.addEventListener("click",(function(){Q.open(),N.resetValidation()})),H.getInitialCards().then((function(e){J.renderItem(e)})).catch((function(e){return console.log(e)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QWUsSUFBSXpDLEVBQWNpQixHQUpWLFNBQUM5RixHQUM1QnFILEVBQVlFLFlBQVl2SCxFQUN6QixJQUdEc0gsRUFBYVYsb0JBRWJYLEVBQWM3RSxpQkFBaUIsU0FBUyxXQUN0Q2tHLEVBQWFYLE9BQ2IsSUFBTWEsRUFBb0JILEVBQVlJLGNBQ3RDbkIsRUFBaUJsQixNQUFRb0MsRUFBa0JwSCxLQUMzQ21HLEVBQWtCbkIsTUFBUW9DLEVBQWtCM0IsTUFDNUNxQixFQUFtQlEsa0JBQ25CUixFQUFtQlMsZ0JBQ3BCLElBRUQsSUFNTUMsRUFBZSxJQUFJL0MsRUFBY2tCLEdBTmIsU0FBQy9GLEdBQ3pCLElBQU1nSCxFQUFjSCxFQUFXN0csR0FDL0IrRyxFQUFTRSxRQUFRRCxHQUNqQlksRUFBYW5ELE9BQ2QsSUFHRG1ELEVBQWFoQixvQkFFYlYsRUFBVzlFLGlCQUFpQixTQUFTLFdBQ25Dd0csRUFBYWpCLE9BQ2JRLEVBQWtCTyxpQkFDbkIsSUFFRGpCLEVBQUlvQixrQkFDSGhJLE1BQUssU0FBQzhELEdBQ0xvRCxFQUFTZSxXQUFXbkUsRUFDckIsSUFBRW9FLE9BQU0sU0FBQ0MsR0FBRCxPQUFTQyxRQUFRQyxJQUFJRixFQUFyQixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3Rvcihob3N0LCB0b2tlbikge1xuICAgIHRoaXMuX2hvc3QgPSBob3N0O1xuICAgIHRoaXMuX3Rva2VuID0gdG9rZW47XG4gICAgdGhpcy5fZ2V0SGVhZGVycyA9IHRoaXMuX2dldEhlYWRlcnMuYmluZCh0aGlzKTtcbiAgfVxuXG4gIC8vINCe0L/RgtC40LzQuNC30LDRhtC40Y8g0LrQvtC00LAsINCy0YvQvdC+0YHQuNC8IGhlYWRlcnMg0LIg0L/RgNC40LLQsNGC0L3Ri9C5INC80LXRgtC+0LRcbiAgX2dldEhlYWRlcnMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX3Rva2VuLFxuICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgfTtcbiAgfVxuXG4gIC8vINCf0YDQuNCy0LDRgtC90YvQuSDQvNC10YLQvtC0INC+0LHRgNCw0LHQvtGC0LrQuCDQvtGC0LLQtdGC0LBcbiAgX2dldEpzb25PckVycm9yKCkge1xuICAgIGlmIChyZXMub2spIHtcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgIH1cbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xuICB9XG5cbiAgLy8g0JfQsNCz0YDRg9C30LrQsCDQutCw0YDRgtC+0YfQtdC6INGBINGB0LXRgNCy0LXRgNCwXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICB0aGlzLl9jYXJkcyA9IGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHNgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9nZXRIZWFkZXJzKCksXG4gICAgfSkudGhlbih0aGlzLl9nZXRKc29uT3JFcnJvcik7XG4gICAgcmV0dXJuIHRoaXMuX2NhcmRzO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoZGF0YSwgc2VsZWN0b3IsIG9wZW5JbWFnZSkge1xuICAgIC8vINC/0LXRgNC10LTQsNC10Lwg0LrQvtC90YHRgtGA0YPQutGC0L7RgNGDINC/0LDRgNCw0LzQtdGC0YDRi1xuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcbiAgICB0aGlzLl9zZWxlY3RvciA9IHNlbGVjdG9yO1xuICAgIHRoaXMuX29wZW5JbWFnZSA9IG9wZW5JbWFnZTtcbiAgfVxuXG4gIC8vINC30LDQsdC40YDQsNC10Lwg0YDQsNC30LzQtdGC0LrRgyDQutCw0YDRgtC+0YfQutC4INC40LcgSFRNTCwg0LrQu9C+0L3QuNGA0YPQtdC8INGN0LvQtdC80LXQvdGCINC4INCy0L7Qt9Cy0YDQsNGJ0LDQtdC8INGN0LvQtdC80LXQvdGCINC60LDRgNGC0L7Rh9C60LhcbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIGNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9zZWxlY3RvcilcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudFwiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcblxuICAgIHJldHVybiBjYXJkVGVtcGxhdGU7XG4gIH1cblxuICAvLyDQt9Cw0LHQuNGA0LDQtdC8IG5hbWUg0LggbGluayDQuNC3INC80LDRgdGB0LjQstCwINC4INCz0L7RgtC+0LLQuNC8INC60LDRgNGC0L7Rh9C60YMg0Log0L/Rg9Cx0LvQuNC60LDRhtC40LhcbiAgZ2VuZXJhdGVDYXJkKCkge1xuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX2ltYWdlRWxlbWVudCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19pbWFnZVwiKTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpOyAvLyDQtNC+0LHQsNCy0LvRj9C10Lwg0L7QsdGA0LDQsdC+0YLRh9C40LrQuFxuXG4gICAgdGhpcy5faW1hZ2VFbGVtZW50LnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5faW1hZ2VFbGVtZW50LmFsdCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2NpdHlcIikudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gIH1cblxuICAvLyDQvNC10YLQvtC0INC00LvRjyDRg9GB0YLQsNC90L7QstC60Lgg0YHQu9GD0YjQsNGC0LXQu9C10Lkg0YHQvtCx0YvRgtC40LlcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2xpa2VcIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2soKTtcbiAgICAgIH0pO1xuXG4gICAgdGhpcy5fZWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fZGVsZXRlXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2soKTtcbiAgICAgIH0pO1xuXG4gICAgdGhpcy5fZWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9faW1hZ2VcIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9vcGVuSW1hZ2UodGhpcy5fbmFtZSwgdGhpcy5fbGluayk7XG4gICAgICB9KTtcbiAgfVxuXG4gIC8vINC80LXRgtC+0LQg0LTQu9GPINC40LfQvNC10L3QtdC90LjRjyDQutC70LDRgdGB0LAg0LvQsNC50LrQsFxuICBfaGFuZGxlTGlrZUNsaWNrKCkge1xuICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2xpa2VcIilcbiAgICAgIC5jbGFzc0xpc3QudG9nZ2xlKFwiZWxlbWVudF9fbGlrZV9hY3RpdmVcIik7XG4gIH1cblxuICAvLyDQvNC10YLQvtC0INC00LvRjyDRg9C00LDQu9C10L3QuNGPINC60LDRgNGC0L7Rh9C60LhcbiAgX2hhbmRsZURlbGV0ZUNsaWNrKCkge1xuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XG4gIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoZm9ybUVsZW1lbnQsIGRhdGFFbGVtZW50KSB7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcbiAgICB0aGlzLl9kYXRhRWxlbWVudCA9IGRhdGFFbGVtZW50O1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20oXG4gICAgICBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2RhdGFFbGVtZW50LmlucHV0U2VsZWN0b3IpXG4gICAgKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIHRoaXMuX2RhdGFFbGVtZW50LnN1Ym1pdEJ1dHRvblNlbGVjdG9yXG4gICAgKTtcbiAgfVxuXG4gIC8vINC80LXRgtC+0LQg0LTQu9GPINC+0YLQvtCx0YDQsNC20LXQvdC40Y8g0L7RiNC40LHQutC4INCy0LLQvtC00LBcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZGF0YUVsZW1lbnQuaW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZGF0YUVsZW1lbnQuZXJyb3JDbGFzcyk7XG4gIH1cblxuICAvLyDQvNC10YLQvtC0INC00LvRjyDRgdC60YDRi9GC0LjRjyDQvtGI0LjQsdC60Lgg0LLQstC+0LTQsFxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZGF0YUVsZW1lbnQuaW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2RhdGFFbGVtZW50LmVycm9yQ2xhc3MpO1xuICB9XG5cbiAgLy8g0LzQtdGC0L7QtCDQtNC70Y8g0L/RgNC+0LLQtdGA0LrQuCDQstCw0LvQuNC00L3QvtGB0YLRjCDQstCy0L7QtNCwXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICAvLyDQtNC+0LHQsNCy0LvQtdC90LjQtSDQvtCx0YDQsNCx0L7RgtGH0LjQutC+0LIg0YHQvtCx0YvRgtC40Lkg0Log0L/QvtC70Y/QvCDRhNC+0YDQvNGLXG4gIF92YWxpZGF0ZUlucHV0KCkge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAvLyDQldGB0LvQuCDQv9C+0LvQtSDQvdC1INCy0LDQu9C40LTQvdC+LCDQutC+0LvQsdGN0Log0LLQtdGA0L3RkdGCIHRydWUsINC+0LHRhdC+0LQg0LzQsNGB0YHQuNCy0LAg0L/RgNC10LrRgNCw0YLQuNGC0YHRjyDQuCDQvNC10YLQvtC0IHZhbGlkYXRlSW5wdXQg0LLQtdGA0L3RkdGCIHRydWVcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9XG5cbiAgLy8g0LzQtdGC0L7QtCDQv9C10YDQtdC60LvRjtGH0LXQvdC40Y8g0YHQvtGB0YLQvtGP0L3QuNGPINC60L3QvtC/0LrQuFxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgLy8g0JXRgdC70Lgg0LXRgdGC0Ywg0YXQvtGC0Y8g0LHRiyDQvtC00LjQvSDQvdC10LLQsNC70LjQtNC90YvQuSDQuNC90L/Rg9GCXG4gICAgaWYgKHRoaXMuX3ZhbGlkYXRlSW5wdXQoKSkge1xuICAgICAgLy8g0YHQtNC10LvQsNC5INC60L3QvtC/0LrRgyDQvdC10LDQutGC0LjQstC90L7QuVxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2RhdGFFbGVtZW50LmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vINC40L3QsNGH0LUg0YHQtNC10LvQsNC5INC60L3QvtC/0LrRgyDQsNC60YLQuNCy0L3QvtC5XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZGF0YUVsZW1lbnQuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLy8g0LzQtdGC0L7QtCDQv9GA0LjQvdC40LzQsNC10YIg0L/QsNGA0LDQvNC10YLRgNC+0Lwg0Y3Qu9C10LzQtdC90YIg0YTQvtGA0LzRiyDQuCDQtNC+0LHQsNCy0LvRj9C10YIg0L/QvtC70Y/QvCDQvdGD0LbQvdGL0LUg0L7QsdGA0LDQsdC+0YLRh9C40LrQuFxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgLy8gLy8g0J/RgNC+0LLQtdGA0LrQsCDRgdC+0YHRgtC+0Y/QvdC40Y8g0LrQvdC+0L/QutC4INCyINGB0LDQvNC+0Lwg0L3QsNGH0LDQu9C1XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcblxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICAvLyDQstGL0LfRi9Cy0LDQtdC8INC80LXRgtC+0Lsg0L/RgNC+0LLQtdGA0LrQuCDQstCw0LvQuNC00L3QvtGB0YLQuCDQstCy0L7QtNCwLCDQv9C10YDQtdC00LDQstCw0Y8g0YTQvtGA0LzRgyDQuCDQv9GA0L7QstC10YDRj9C10LzRi9C5INGN0LvQtdC80LXQvdGCXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICAvLyDQn9GA0L7QstC10YDQutCwINGB0L7RgdGC0L7Rj9C90LjRjyDQutC90L7Qv9C60Lgg0L/RgNC4INC40LfQvNC10L3QtdC90LjQuCDQu9GO0LHQvtCz0L4g0LjQtyDQv9C+0LvQtdC5XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vINC80LXRgtC+0LQg0L7Rh9C40YnQsNC10YIg0L7RiNC40LHQutC4INC4INCx0LvQvtC60LjRgNGD0LXRgiDQutC90L7Qv9C60YNcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG5cbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9KVxuICB9XG5cbiAgZGlzYWJsZWRCdXR0b24oKSB7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2RhdGFFbGVtZW50LmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zID0gaXRlbXM7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBjb250YWluZXJTZWxlY3RvcjtcbiAgfVxuXG4gIGFkZEl0ZW0oaXRlbSkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGl0ZW0pO1xuICB9XG5cbiAgcmVuZGVySXRlbSgpIHtcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgIH0pO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cCA9IHBvcHVwU2VsZWN0b3I7XG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlKGUpIHtcbiAgICBpZiAoZS5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZSkgPT4ge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBfb3BlbmVkXCIpIHx8XG4gICAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBfX2J1dHRvbi1jbG9zZVwiKVxuICAgICAgICApIHtcbiAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9uYW1lID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2FwdGlvblwiKTtcbiAgICB0aGlzLl9saW5rID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2Utc3JjXCIpO1xuICB9XG5cbiAgb3BlbihuYW1lLCBsaW5rKSB7XG4gICAgdGhpcy5fbGluay5zcmMgPSBsaW5rO1xuICAgIHRoaXMuX2xpbmsuYWx0ID0gbmFtZTtcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBzdWJtaXRGb3JtKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XG4gICAgdGhpcy5faW5wdXRzID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19pbnB1dFwiKTtcbiAgICB0aGlzLl9zdWJtaXRGb3JtID0gc3VibWl0Rm9ybTtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICBjb25zdCB2YWx1ZXMgPSB7fTtcbiAgICB0aGlzLl9pbnB1dHMuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAgIHZhbHVlc1tlbGVtZW50Lm5hbWVdID0gZWxlbWVudC52YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gdmFsdWVzO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX3N1Ym1pdEZvcm0odGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcbiAgfVxuXG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gICAgY29uc3RydWN0b3IgKG9iaikge1xuICAgICAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihvYmoubmFtZVNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fYWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG9iai5hYm91dFNlbGVjdG9yKTtcbiAgICB9XG5cbiAgICBnZXRVc2VySW5mbygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuX25hbWUudGV4dENvbnRlbnQsXG4gICAgICAgICAgICBhYm91dDogdGhpcy5fYWJvdXQudGV4dENvbnRlbnQsXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRVc2VySW5mbyhkYXRhKSB7XG4gICAgICAgIHRoaXMuX25hbWUudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG4gICAgICAgIHRoaXMuX2Fib3V0LnRleHRDb250ZW50ID0gZGF0YS5hYm91dDtcbiAgICB9XG59IiwiZXhwb3J0IGNvbnN0IHBvcHVwcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBcIik7XG5leHBvcnQgY29uc3QgcG9wdXBVc2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9wcm9maWxlXCIpO1xuZXhwb3J0IGNvbnN0IHBvcHVwQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfbmV3LWNhcmRcIik7XG5leHBvcnQgY29uc3QgcG9wdXBJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfaW1hZ2VcIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYnV0dG9uLWVkaXRcIik7XG5leHBvcnQgY29uc3Qg0YFhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2J1dHRvbi1lZGRcIik7XG5leHBvcnQgY29uc3QgY2FyZExpc3RTZWxlY3RvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNcIik7XG5leHBvcnQgY29uc3QgZm9ybUVsZW1lbnRVc2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcbmV4cG9ydCBjb25zdCBmb3JtRWxlbWVudENhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtX25ldy1jYXJkXCIpO1xuZXhwb3J0IGNvbnN0IG5hbWVGaWVsZEVsZW1lbnQgPSBmb3JtRWxlbWVudFVzZXIucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW5wdXQtbmFtZVwiKTtcbmV4cG9ydCBjb25zdCBhYm91dEZpZWxkRWxlbWVudCA9IGZvcm1FbGVtZW50VXNlci5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbnB1dC1hYm91dFwiKTtcblxuZXhwb3J0IGNvbnN0IGRhdGFFbGVtZW50ID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2Vycm9yLXZpc2libGVcIixcbn07XG5cbmV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcItCQ0YDRhdGL0LdcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9hcmtoeXouanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcItCn0LXQu9GP0LHQuNC90YHQutCw0Y8g0L7QsdC70LDRgdGC0YxcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9jaGVseWFiaW5zay1vYmxhc3QuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcItCY0LLQsNC90L7QstC+XCIsXG4gICAgbGluazogXCJodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvaXZhbm92by5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwi0JrQsNC80YfQsNGC0LrQsFwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2thbWNoYXRrYS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwi0KXQvtC70LzQvtCz0L7RgNGB0LrQuNC5INGA0LDQudC+0L1cIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9raG9sbW9nb3Jza3ktcmF5b24uanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcItCR0LDQudC60LDQu1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2JhaWthbC5qcGdcIixcbiAgfSxcbl07IiwiaW1wb3J0IFwiLi8uLi9wYWdlcy9pbmRleC5jc3NcIjtcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQge1xuICBwb3B1cFVzZXIsXG4gIHBvcHVwQ2FyZCxcbiAgcG9wdXBJbWFnZSxcbiAgcHJvZmlsZUJ1dHRvbixcbiAg0YFhcmRCdXR0b24sXG4gIGNhcmRMaXN0U2VsZWN0b3IsXG4gIGZvcm1FbGVtZW50VXNlcixcbiAgZm9ybUVsZW1lbnRDYXJkLFxuICBuYW1lRmllbGRFbGVtZW50LFxuICBhYm91dEZpZWxkRWxlbWVudCxcbiAgZGF0YUVsZW1lbnQsXG4gIGluaXRpYWxDYXJkcyxcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgaG9zdDogXCJodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTQ3XCIsXG4gIHRva2VuOiBcIjU3ZmU3NTMyLWFkYWYtNGUwMi1iNDBmLTMwZGExYmNlNzhjZFwiXG59KVxuXG5jb25zdCBvcGVuSW1hZ2UgPSAobmFtZSwgbGluaykgPT4ge1xuICBpbWFnZVBvcHVwLm9wZW4obmFtZSwgbGluayk7XG59O1xuXG5jb25zdCBpbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKHBvcHVwSW1hZ2UpO1xuaW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBjcmVhdGVDYXJkID0gKGRhdGEpID0+IHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGRhdGEsIFwiI2VsZW1lbnQtdGVtcGxhdGVcIiwgb3BlbkltYWdlKTtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xuICByZXR1cm4gY2FyZEVsZW1lbnQ7XG59XG5cbmNvbnN0IGNhcmRMaXN0ID0gbmV3IFNlY3Rpb24oXG4gIHtcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKGl0ZW0pO1xuICAgICAgY2FyZExpc3QuYWRkSXRlbShjYXJkRWxlbWVudCk7XG4gICAgfSxcbiAgfSxcbiAgY2FyZExpc3RTZWxlY3RvclxuKTtcbi8vIGNhcmRMaXN0LnJlbmRlckl0ZW0oKTtcblxuY29uc3QgdXNlckZvcm1WYWxpZGF0aW9uID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybUVsZW1lbnRVc2VyLCBkYXRhRWxlbWVudCk7XG5jb25zdCBhZGRGb3JtVmFsaWRhdGlvbiA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1FbGVtZW50Q2FyZCwgZGF0YUVsZW1lbnQpO1xudXNlckZvcm1WYWxpZGF0aW9uLmVuYWJsZVZhbGlkYXRpb24oKTtcbmFkZEZvcm1WYWxpZGF0aW9uLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgcHJvZmlsZUluZm8gPSBuZXcgVXNlckluZm8oe1xuICBuYW1lU2VsZWN0b3I6IFwiLnByb2ZpbGVfX3VzZXItbmFtZVwiLFxuICBhYm91dFNlbGVjdG9yOiBcIi5wcm9maWxlX191c2VyLWFib3V0XCIsXG59KVxuXG5jb25zdCBoYW5kbGVyUHJvZmlsZVN1Ym1pdCA9IChkYXRhKSA9PiB7XG4gIHByb2ZpbGVJbmZvLnNldFVzZXJJbmZvKGRhdGEpO1xufTtcblxuY29uc3QgcHJvZmlsZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0ocG9wdXBVc2VyLCBoYW5kbGVyUHJvZmlsZVN1Ym1pdCk7XG5wcm9maWxlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxucHJvZmlsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBwcm9maWxlUG9wdXAub3BlbigpO1xuICBjb25zdCBwcm9maWxlSW5mb1ZhbHVlcyA9IHByb2ZpbGVJbmZvLmdldFVzZXJJbmZvKCk7XG4gIG5hbWVGaWVsZEVsZW1lbnQudmFsdWUgPSBwcm9maWxlSW5mb1ZhbHVlcy5uYW1lO1xuICBhYm91dEZpZWxkRWxlbWVudC52YWx1ZSA9IHByb2ZpbGVJbmZvVmFsdWVzLmFib3V0O1xuICB1c2VyRm9ybVZhbGlkYXRpb24ucmVzZXRWYWxpZGF0aW9uKCk7XG4gIHVzZXJGb3JtVmFsaWRhdGlvbi5kaXNhYmxlZEJ1dHRvbigpO1xufSk7XG5cbmNvbnN0IGhhbmRsZXJDYXJkU3VibWl0ID0gKGRhdGEpID0+IHtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKGRhdGEpO1xuICBjYXJkTGlzdC5hZGRJdGVtKGNhcmRFbGVtZW50KTtcbiAgbmV3Q2FyZFBvcHVwLmNsb3NlKCk7XG59O1xuXG5jb25zdCBuZXdDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShwb3B1cENhcmQsIGhhbmRsZXJDYXJkU3VibWl0KTtcbm5ld0NhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG7RgWFyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBuZXdDYXJkUG9wdXAub3BlbigpO1xuICBhZGRGb3JtVmFsaWRhdGlvbi5yZXNldFZhbGlkYXRpb24oKTtcbn0pO1xuXG5hcGkuZ2V0SW5pdGlhbENhcmRzKClcbi50aGVuKChpdGVtcykgPT4ge1xuICBjYXJkTGlzdC5yZW5kZXJJdGVtKGl0ZW1zKTtcbn0pLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpIl0sIm5hbWVzIjpbIkFwaSIsImhvc3QiLCJ0b2tlbiIsInRoaXMiLCJfaG9zdCIsIl90b2tlbiIsIl9nZXRIZWFkZXJzIiwiYmluZCIsImF1dGhvcml6YXRpb24iLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiX2NhcmRzIiwiZmV0Y2giLCJfdXJsIiwiaGVhZGVycyIsInRoZW4iLCJfZ2V0SnNvbk9yRXJyb3IiLCJDYXJkIiwiZGF0YSIsInNlbGVjdG9yIiwib3BlbkltYWdlIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX3NlbGVjdG9yIiwiX29wZW5JbWFnZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfZWxlbWVudCIsIl9nZXRUZW1wbGF0ZSIsIl9pbWFnZUVsZW1lbnQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJzcmMiLCJhbHQiLCJ0ZXh0Q29udGVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlTGlrZUNsaWNrIiwiX2hhbmRsZURlbGV0ZUNsaWNrIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwicmVtb3ZlIiwiRm9ybVZhbGlkYXRvciIsImZvcm1FbGVtZW50IiwiZGF0YUVsZW1lbnQiLCJfZm9ybUVsZW1lbnQiLCJfZGF0YUVsZW1lbnQiLCJfaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0U2VsZWN0b3IiLCJfYnV0dG9uRWxlbWVudCIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJhZGQiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwic29tZSIsIl92YWxpZGF0ZUlucHV0IiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImRpc2FibGVkIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZm9yRWFjaCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX3JlbmRlcmVkSXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiaXRlbSIsInByZXBlbmQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXAiLCJfaGFuZGxlRXNjQ2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZSIsImtleSIsImNsb3NlIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhJbWFnZSIsIlBvcHVwV2l0aEZvcm0iLCJzdWJtaXRGb3JtIiwiX2Zvcm0iLCJfaW5wdXRzIiwiX3N1Ym1pdEZvcm0iLCJ2YWx1ZXMiLCJlbGVtZW50IiwidmFsdWUiLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiVXNlckluZm8iLCJvYmoiLCJuYW1lU2VsZWN0b3IiLCJfYWJvdXQiLCJhYm91dFNlbGVjdG9yIiwiYWJvdXQiLCJwb3B1cFVzZXIiLCJwb3B1cENhcmQiLCJwb3B1cEltYWdlIiwicHJvZmlsZUJ1dHRvbiIsItGBYXJkQnV0dG9uIiwiY2FyZExpc3RTZWxlY3RvciIsImZvcm1FbGVtZW50VXNlciIsImZvcm1FbGVtZW50Q2FyZCIsIm5hbWVGaWVsZEVsZW1lbnQiLCJhYm91dEZpZWxkRWxlbWVudCIsImZvcm1TZWxlY3RvciIsImFwaSIsImltYWdlUG9wdXAiLCJvcGVuIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJjcmVhdGVDYXJkIiwiZ2VuZXJhdGVDYXJkIiwiY2FyZExpc3QiLCJjYXJkRWxlbWVudCIsImFkZEl0ZW0iLCJ1c2VyRm9ybVZhbGlkYXRpb24iLCJhZGRGb3JtVmFsaWRhdGlvbiIsImVuYWJsZVZhbGlkYXRpb24iLCJwcm9maWxlSW5mbyIsInByb2ZpbGVQb3B1cCIsInNldFVzZXJJbmZvIiwicHJvZmlsZUluZm9WYWx1ZXMiLCJnZXRVc2VySW5mbyIsInJlc2V0VmFsaWRhdGlvbiIsImRpc2FibGVkQnV0dG9uIiwibmV3Q2FyZFBvcHVwIiwiZ2V0SW5pdGlhbENhcmRzIiwicmVuZGVySXRlbSIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyJdLCJzb3VyY2VSb290IjoiIn0=