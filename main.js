(()=>{var e={578:()=>{var e=document.forms.search,t=(document.querySelector(".content"),document.querySelector(".content__result")),n=document.querySelector(".content__error");document.querySelector(".spinner"),e.addEventListener("submit",(function(r){var o,i;r.preventDefault(),(o=e.elements.entity.value,i=e.elements.entityId.value,fetch("https://swapi.nomoreparties.co/".concat(o,"/").concat(i,"/"))).then((function(e){return e.ok?e.json():Promise.reject(e.status)})).then((function(e){var r;r=e.name,t.textContent=r,n.textContent="",console.log(e)})).catch((function(e){!function(e){t.textContent="",n.textContent=e}("Ошибка: ".concat(e)),console.log("Ошибка: ".concat(e))}))}))}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=n(578),t=n.n(e);function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formElement=t,this._dataElement=n,this._inputList=Array.from(t.querySelectorAll(this._dataElement.inputSelector)),this._buttonElement=this._formElement.querySelector(this._dataElement.submitButtonSelector)}var t,n;return t=e,(n=[{key:"_showInputError",value:function(e,t){var n=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.add(this._dataElement.inputErrorClass),n.textContent=t,n.classList.add(this._dataElement.errorClass)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.remove(this._dataElement.inputErrorClass),t.textContent="",t.classList.remove(this._dataElement.errorClass)}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_validateInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._validateInput()?(this._buttonElement.classList.add(this._dataElement.inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._dataElement.inactiveButtonClass),this._buttonElement.disabled=!1)}},{key:"_setEventListeners",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}},{key:"resetValidation",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){e._hideInputError(t)}))}},{key:"disabledButton",value:function(){this._buttonElement.classList.add(this._dataElement.inactiveButtonClass),this._buttonElement.disabled=!0}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&r(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=r,this._renderer=o,this._container=n}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"renderItem",value:function(){var e=this;this._renderedItems.forEach((function(t){e._renderer(t)}))}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=t,this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("mousedown",(function(t){(t.target.classList.contains("popup_opened")||t.target.classList.contains("popup__button-close"))&&e.close()}))}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=f(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},p.apply(this,arguments)}function f(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function y(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(r);if(o){var n=h(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return y(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._name=t._popup.querySelector(".popup__caption"),t._link=t._popup.querySelector(".popup__image-src"),t}return t=u,(n=[{key:"open",value:function(e,t){this._link.src=t,this._link.alt=e,this._name.textContent=e,p(h(u.prototype),"open",this).call(this)}}])&&l(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(c);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(){return b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=E(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},b.apply(this,arguments)}function E(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}function g(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=k(r);if(o){var n=k(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return g(this,e)});function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e))._form=n._popup.querySelector(".popup__form"),n._inputs=n._form.querySelectorAll(".popup__input"),n._submitForm=t,n}return t=u,(n=[{key:"_getInputValues",value:function(){var e={};return this._inputs.forEach((function(t){e[t.name]=t.value})),e}},{key:"setEventListeners",value:function(){var e=this;b(k(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._submitForm(e._getInputValues()),e.close()}))}},{key:"close",value:function(){b(k(u.prototype),"close",this).call(this),this._form.reset()}}])&&v(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(c);function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var j=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(t.nameSelector),this._about=document.querySelector(t.aboutSelector)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,about:this._about.textContent}}},{key:"setUserInfo",value:function(e){this._name.textContent=e.name,this._about.textContent=e.about}}])&&O(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),C=(document.querySelectorAll(".popup"),document.querySelector(".popup_profile")),P=document.querySelector(".popup_new-card"),L=document.querySelector(".popup_image"),q=document.querySelector(".profile__button-edit"),x=document.querySelector(".profile__button-edd"),I=document.querySelector(".elements"),R=document.querySelector(".popup__form"),B=document.querySelector(".popup__form_new-card"),T=R.querySelector(".popup__input-name"),V=R.querySelector(".popup__input-about"),D={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error-visible"},A=function(e,t){U.open(e,t)},U=new _(L);U.setEventListeners();var F=function(e){return new(t())(e,"#element-template",A).generateCard()},M=new u({items:[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],renderer:function(e){var t=F(e);M.addItem(t)}},I);M.renderItem();var z=new o(R,D),G=new o(B,D);z.enableValidation(),G.enableValidation();var H=new j({nameSelector:".profile__user-name",aboutSelector:".profile__user-about"}),J=new S(C,(function(e){H.setUserInfo(e)}));J.setEventListeners(),q.addEventListener("click",(function(){J.open();var e=H.getUserInfo();T.value=e.name,V.value=e.about,z.resetValidation(),z.disabledButton()}));var K=new S(P,(function(e){var t=F(e);M.addItem(t),K.close()}));K.setEventListeners(),x.addEventListener("click",(function(){K.open(),G.resetValidation()}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFHRDJCLEVBQWFaLG9CQUViWCxFQUFjN0gsaUJBQWlCLFNBQVMsV0FDdENvSixFQUFhYixPQUNiLElBQU1lLEVBQW9CSCxFQUFZSSxjQUN0Q3JCLEVBQWlCNUgsTUFBUWdKLEVBQWtCdEksS0FDM0NtSCxFQUFrQjdILE1BQVFnSixFQUFrQjlCLE1BQzVDd0IsRUFBbUJRLGtCQUNuQlIsRUFBbUJTLGdCQUNwQixJQUVELElBTU1DLEVBQWUsSUFBSS9DLEVBQWNnQixHQU5iLFNBQUNGLEdBQ3pCLElBQU1vQixFQUFjSixFQUFXaEIsR0FDL0JtQixFQUFTRSxRQUFRRCxHQUNqQmEsRUFBYXhELE9BQ2QsSUFHRHdELEVBQWFsQixvQkFFYlYsRUFBVzlILGlCQUFpQixTQUFTLFdBQ25DMEosRUFBYW5CLE9BQ2JVLEVBQWtCTyxpQkFDbkIsRyIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9tZXN0by93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly9tZXN0by93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vbWVzdG8vd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZm9ybSA9IGRvY3VtZW50LmZvcm1zLnNlYXJjaDtcbmNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRlbnRcIik7XG5jb25zdCByZXN1bHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRlbnRfX3Jlc3VsdFwiKTtcbmNvbnN0IGVycm9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250ZW50X19lcnJvclwiKTtcbmNvbnN0IHNwaW5uZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNwaW5uZXJcIik7XG5cbmZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBmdW5jdGlvbiBzdWJtaXQoZSkge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIHNlYXJjaChmb3JtLmVsZW1lbnRzLmVudGl0eS52YWx1ZSwgZm9ybS5lbGVtZW50cy5lbnRpdHlJZC52YWx1ZSlcbiAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTsgLy8g0LLQvtC30LLRgNCw0YnQsNC10Lwg0LLRi9C30L7QsiDQvNC10YLQvtC00LAganNvblxuICAgICAgfVxuXG4gICAgICAvLyDQuNC90LDRh9C1INC+0YLQutC70L7QvdGP0LXQvCDQv9GA0L7QvNC40YEsINGH0YLQvtCx0Ysg0L/QtdGA0LXQudGC0Lgg0LIgY2F0Y2hcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZXMuc3RhdHVzKTtcbiAgICB9KVxuICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgIHJlbmRlclJlc3VsdChyZXMubmFtZSk7XG4gICAgICBjb25zb2xlLmxvZyhyZXMpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIHJlbmRlckVycm9yKGDQntGI0LjQsdC60LA6ICR7ZXJyfWApO1xuICAgICAgY29uc29sZS5sb2coYNCe0YjQuNCx0LrQsDogJHtlcnJ9YCk7Ly8g0LLRi9Cy0L7QtNC40Lwg0LIg0LrQvtC90YHQvtC70Ywg0YHQvtC+0LHRidC10L3QuNC1INC+0LEg0L7RiNC40LHQutC1XG4gICAgfSk7XG59KTtcblxuZnVuY3Rpb24gc2VhcmNoKGVudGl0eSwgZW50aXR5SWQpIHtcbiAgcmV0dXJuIGZldGNoKGBodHRwczovL3N3YXBpLm5vbW9yZXBhcnRpZXMuY28vJHtlbnRpdHl9LyR7ZW50aXR5SWR9L2ApO1xufVxuXG5mdW5jdGlvbiByZW5kZXJSZXN1bHQodGV4dCkge1xuICByZXN1bHQudGV4dENvbnRlbnQgPSB0ZXh0O1xuICBlcnJvci50ZXh0Q29udGVudCA9ICcnO1xufVxuXG5mdW5jdGlvbiByZW5kZXJFcnJvcihlcnIpIHtcbiAgcmVzdWx0LnRleHRDb250ZW50ID0gJyc7XG4gIGVycm9yLnRleHRDb250ZW50ID0gZXJyO1xufVxuXG5mdW5jdGlvbiByZW5kZXJMb2FkaW5nKGlzTG9hZGluZykge1xuICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgc3Bpbm5lci5jbGFzc0xpc3QuYWRkKCdzcGlubmVyX3Zpc2libGUnKTtcbiAgICBjb250ZW50LmNsYXNzTGlzdC5hZGQoJ2NvbnRlbnRfaGlkZGVuJyk7XG4gIH0gZWxzZSB7XG4gICAgc3Bpbm5lci5jbGFzc0xpc3QucmVtb3ZlKCdzcGlubmVyX3Zpc2libGUnKTtcbiAgICBjb250ZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2NvbnRlbnRfaGlkZGVuJyk7XG4gIH1cbn0gIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IChtb2R1bGVbJ2RlZmF1bHQnXSkgOlxuXHRcdCgpID0+IChtb2R1bGUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihmb3JtRWxlbWVudCwgZGF0YUVsZW1lbnQpIHtcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICAgIHRoaXMuX2RhdGFFbGVtZW50ID0gZGF0YUVsZW1lbnQ7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICAgIGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fZGF0YUVsZW1lbnQuaW5wdXRTZWxlY3RvcilcbiAgICApO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgdGhpcy5fZGF0YUVsZW1lbnQuc3VibWl0QnV0dG9uU2VsZWN0b3JcbiAgICApO1xuICB9XG5cbiAgLy8g0LzQtdGC0L7QtCDQtNC70Y8g0L7RgtC+0LHRgNCw0LbQtdC90LjRjyDQvtGI0LjQsdC60Lgg0LLQstC+0LTQsFxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9kYXRhRWxlbWVudC5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9kYXRhRWxlbWVudC5lcnJvckNsYXNzKTtcbiAgfVxuXG4gIC8vINC80LXRgtC+0LQg0LTQu9GPINGB0LrRgNGL0YLQuNGPINC+0YjQuNCx0LrQuCDQstCy0L7QtNCwXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9kYXRhRWxlbWVudC5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZGF0YUVsZW1lbnQuZXJyb3JDbGFzcyk7XG4gIH1cblxuICAvLyDQvNC10YLQvtC0INC00LvRjyDQv9GA0L7QstC10YDQutC4INCy0LDQu9C40LTQvdC+0YHRgtGMINCy0LLQvtC00LBcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIC8vINC00L7QsdCw0LLQu9C10L3QuNC1INC+0LHRgNCw0LHQvtGC0YfQuNC60L7QsiDRgdC+0LHRi9GC0LjQuSDQuiDQv9C+0LvRj9C8INGE0L7RgNC80YtcbiAgX3ZhbGlkYXRlSW5wdXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIC8vINCV0YHQu9C4INC/0L7Qu9C1INC90LUg0LLQsNC70LjQtNC90L4sINC60L7Qu9Cx0Y3QuiDQstC10YDQvdGR0YIgdHJ1ZSwg0L7QsdGF0L7QtCDQvNCw0YHRgdC40LLQsCDQv9GA0LXQutGA0LDRgtC40YLRgdGPINC4INC80LXRgtC+0LQgdmFsaWRhdGVJbnB1dCDQstC10YDQvdGR0YIgdHJ1ZVxuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gICAgfSk7XG4gIH1cblxuICAvLyDQvNC10YLQvtC0INC/0LXRgNC10LrQu9GO0YfQtdC90LjRjyDRgdC+0YHRgtC+0Y/QvdC40Y8g0LrQvdC+0L/QutC4XG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICAvLyDQldGB0LvQuCDQtdGB0YLRjCDRhdC+0YLRjyDQsdGLINC+0LTQuNC9INC90LXQstCw0LvQuNC00L3Ri9C5INC40L3Qv9GD0YJcbiAgICBpZiAodGhpcy5fdmFsaWRhdGVJbnB1dCgpKSB7XG4gICAgICAvLyDRgdC00LXQu9Cw0Lkg0LrQvdC+0L/QutGDINC90LXQsNC60YLQuNCy0L3QvtC5XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZGF0YUVsZW1lbnQuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8g0LjQvdCw0YfQtSDRgdC00LXQu9Cw0Lkg0LrQvdC+0L/QutGDINCw0LrRgtC40LLQvdC+0LlcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9kYXRhRWxlbWVudC5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvLyDQvNC10YLQvtC0INC/0YDQuNC90LjQvNCw0LXRgiDQv9Cw0YDQsNC80LXRgtGA0L7QvCDRjdC70LXQvNC10L3RgiDRhNC+0YDQvNGLINC4INC00L7QsdCw0LLQu9GP0LXRgiDQv9C+0LvRj9C8INC90YPQttC90YvQtSDQvtCx0YDQsNCx0L7RgtGH0LjQutC4XG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAvLyAvLyDQn9GA0L7QstC10YDQutCwINGB0L7RgdGC0L7Rj9C90LjRjyDQutC90L7Qv9C60Lgg0LIg0YHQsNC80L7QvCDQvdCw0YfQsNC70LVcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIC8vINCy0YvQt9GL0LLQsNC10Lwg0LzQtdGC0L7QuyDQv9GA0L7QstC10YDQutC4INCy0LDQu9C40LTQvdC+0YHRgtC4INCy0LLQvtC00LAsINC/0LXRgNC10LTQsNCy0LDRjyDRhNC+0YDQvNGDINC4INC/0YDQvtCy0LXRgNGP0LXQvNGL0Lkg0Y3Qu9C10LzQtdC90YJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIC8vINCf0YDQvtCy0LXRgNC60LAg0YHQvtGB0YLQvtGP0L3QuNGPINC60L3QvtC/0LrQuCDQv9GA0Lgg0LjQt9C80LXQvdC10L3QuNC4INC70Y7QsdC+0LPQviDQuNC3INC/0L7Qu9C10LlcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLy8g0LzQtdGC0L7QtCDQvtGH0LjRidCw0LXRgiDQvtGI0LjQsdC60Lgg0Lgg0LHQu9C+0LrQuNGA0YPQtdGCINC60L3QvtC/0LrRg1xuICByZXNldFZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcblxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0pXG4gIH1cblxuICBkaXNhYmxlZEJ1dHRvbigpIHtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZGF0YUVsZW1lbnQuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGNvbnRhaW5lclNlbGVjdG9yO1xuICB9XG5cbiAgYWRkSXRlbShpdGVtKSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoaXRlbSk7XG4gIH1cblxuICByZW5kZXJJdGVtKCkge1xuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwID0gcG9wdXBTZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UoZSkge1xuICAgIGlmIChlLmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChlKSA9PiB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cF9vcGVuZWRcIikgfHxcbiAgICAgICAgICBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cF9fYnV0dG9uLWNsb3NlXCIpXG4gICAgICAgICkge1xuICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX25hbWUgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jYXB0aW9uXCIpO1xuICAgIHRoaXMuX2xpbmsgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZS1zcmNcIik7XG4gIH1cblxuICBvcGVuKG5hbWUsIGxpbmspIHtcbiAgICB0aGlzLl9saW5rLnNyYyA9IGxpbms7XG4gICAgdGhpcy5fbGluay5hbHQgPSBuYW1lO1xuICAgIHRoaXMuX25hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIHN1Ym1pdEZvcm0pIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcbiAgICB0aGlzLl9pbnB1dHMgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2lucHV0XCIpO1xuICAgIHRoaXMuX3N1Ym1pdEZvcm0gPSBzdWJtaXRGb3JtO1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIGNvbnN0IHZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgdmFsdWVzW2VsZW1lbnQubmFtZV0gPSBlbGVtZW50LnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiB2YWx1ZXM7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5fc3VibWl0Rm9ybSh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xuICB9XG5cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgICBjb25zdHJ1Y3RvciAob2JqKSB7XG4gICAgICAgIHRoaXMuX25hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG9iai5uYW1lU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9hYm91dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iob2JqLmFib3V0U2VsZWN0b3IpO1xuICAgIH1cblxuICAgIGdldFVzZXJJbmZvKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmFtZTogdGhpcy5fbmFtZS50ZXh0Q29udGVudCxcbiAgICAgICAgICAgIGFib3V0OiB0aGlzLl9hYm91dC50ZXh0Q29udGVudCxcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldFVzZXJJbmZvKGRhdGEpIHtcbiAgICAgICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcbiAgICAgICAgdGhpcy5fYWJvdXQudGV4dENvbnRlbnQgPSBkYXRhLmFib3V0O1xuICAgIH1cbn0iLCJleHBvcnQgY29uc3QgcG9wdXBzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cFwiKTtcbmV4cG9ydCBjb25zdCBwb3B1cFVzZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3Byb2ZpbGVcIik7XG5leHBvcnQgY29uc3QgcG9wdXBDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9uZXctY2FyZFwiKTtcbmV4cG9ydCBjb25zdCBwb3B1cEltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9pbWFnZVwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19idXR0b24tZWRpdFwiKTtcbmV4cG9ydCBjb25zdCDRgWFyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYnV0dG9uLWVkZFwiKTtcbmV4cG9ydCBjb25zdCBjYXJkTGlzdFNlbGVjdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c1wiKTtcbmV4cG9ydCBjb25zdCBmb3JtRWxlbWVudFVzZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xuZXhwb3J0IGNvbnN0IGZvcm1FbGVtZW50Q2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1fbmV3LWNhcmRcIik7XG5leHBvcnQgY29uc3QgbmFtZUZpZWxkRWxlbWVudCA9IGZvcm1FbGVtZW50VXNlci5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbnB1dC1uYW1lXCIpO1xuZXhwb3J0IGNvbnN0IGFib3V0RmllbGRFbGVtZW50ID0gZm9ybUVsZW1lbnRVc2VyLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2lucHV0LWFib3V0XCIpO1xuXG5leHBvcnQgY29uc3QgZGF0YUVsZW1lbnQgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIucG9wdXBfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cF9fYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX2J1dHRvbl9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJwb3B1cF9fZXJyb3ItdmlzaWJsZVwiLFxufTtcblxuZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwi0JDRgNGF0YvQt1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2Fya2h5ei5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwi0KfQtdC70Y/QsdC40L3RgdC60LDRjyDQvtCx0LvQsNGB0YLRjFwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2NoZWx5YWJpbnNrLW9ibGFzdC5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwi0JjQstCw0L3QvtCy0L5cIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9pdmFub3ZvLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCLQmtCw0LzRh9Cw0YLQutCwXCIsXG4gICAgbGluazogXCJodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQva2FtY2hhdGthLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCLQpdC+0LvQvNC+0LPQvtGA0YHQutC40Lkg0YDQsNC50L7QvVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2tob2xtb2dvcnNreS1yYXlvbi5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwi0JHQsNC50LrQsNC7XCIsXG4gICAgbGluazogXCJodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvYmFpa2FsLmpwZ1wiLFxuICB9LFxuXTsiLCJpbXBvcnQgXCIuLy4uL3BhZ2VzL2luZGV4LmNzc1wiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCB7XG4gIHBvcHVwVXNlcixcbiAgcG9wdXBDYXJkLFxuICBwb3B1cEltYWdlLFxuICBwcm9maWxlQnV0dG9uLFxuICDRgWFyZEJ1dHRvbixcbiAgY2FyZExpc3RTZWxlY3RvcixcbiAgZm9ybUVsZW1lbnRVc2VyLFxuICBmb3JtRWxlbWVudENhcmQsXG4gIG5hbWVGaWVsZEVsZW1lbnQsXG4gIGFib3V0RmllbGRFbGVtZW50LFxuICBkYXRhRWxlbWVudCxcbiAgaW5pdGlhbENhcmRzLFxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5cbmNvbnN0IG9wZW5JbWFnZSA9IChuYW1lLCBsaW5rKSA9PiB7XG4gIGltYWdlUG9wdXAub3BlbihuYW1lLCBsaW5rKTtcbn07XG5cbmNvbnN0IGltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UocG9wdXBJbWFnZSk7XG5pbWFnZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IGNyZWF0ZUNhcmQgPSAoZGF0YSkgPT4ge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoZGF0YSwgXCIjZWxlbWVudC10ZW1wbGF0ZVwiLCBvcGVuSW1hZ2UpO1xuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2VuZXJhdGVDYXJkKCk7XG4gIHJldHVybiBjYXJkRWxlbWVudDtcbn1cblxuY29uc3QgY2FyZExpc3QgPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXG4gICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoaXRlbSk7XG4gICAgICBjYXJkTGlzdC5hZGRJdGVtKGNhcmRFbGVtZW50KTtcbiAgICB9LFxuICB9LFxuICBjYXJkTGlzdFNlbGVjdG9yXG4pO1xuY2FyZExpc3QucmVuZGVySXRlbSgpO1xuXG5jb25zdCB1c2VyRm9ybVZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtRWxlbWVudFVzZXIsIGRhdGFFbGVtZW50KTtcbmNvbnN0IGFkZEZvcm1WYWxpZGF0aW9uID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybUVsZW1lbnRDYXJkLCBkYXRhRWxlbWVudCk7XG51c2VyRm9ybVZhbGlkYXRpb24uZW5hYmxlVmFsaWRhdGlvbigpO1xuYWRkRm9ybVZhbGlkYXRpb24uZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBwcm9maWxlSW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gIG5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fdXNlci1uYW1lXCIsXG4gIGFib3V0U2VsZWN0b3I6IFwiLnByb2ZpbGVfX3VzZXItYWJvdXRcIixcbn0pXG5cbmNvbnN0IGhhbmRsZXJQcm9maWxlU3VibWl0ID0gKGRhdGEpID0+IHtcbiAgcHJvZmlsZUluZm8uc2V0VXNlckluZm8oZGF0YSk7XG59O1xuXG5jb25zdCBwcm9maWxlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShwb3B1cFVzZXIsIGhhbmRsZXJQcm9maWxlU3VibWl0KTtcbnByb2ZpbGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5wcm9maWxlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIHByb2ZpbGVQb3B1cC5vcGVuKCk7XG4gIGNvbnN0IHByb2ZpbGVJbmZvVmFsdWVzID0gcHJvZmlsZUluZm8uZ2V0VXNlckluZm8oKTtcbiAgbmFtZUZpZWxkRWxlbWVudC52YWx1ZSA9IHByb2ZpbGVJbmZvVmFsdWVzLm5hbWU7XG4gIGFib3V0RmllbGRFbGVtZW50LnZhbHVlID0gcHJvZmlsZUluZm9WYWx1ZXMuYWJvdXQ7XG4gIHVzZXJGb3JtVmFsaWRhdGlvbi5yZXNldFZhbGlkYXRpb24oKTtcbiAgdXNlckZvcm1WYWxpZGF0aW9uLmRpc2FibGVkQnV0dG9uKCk7XG59KTtcblxuY29uc3QgaGFuZGxlckNhcmRTdWJtaXQgPSAoZGF0YSkgPT4ge1xuICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoZGF0YSk7XG4gIGNhcmRMaXN0LmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xuICBuZXdDYXJkUG9wdXAuY2xvc2UoKTtcbn07XG5cbmNvbnN0IG5ld0NhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHBvcHVwQ2FyZCwgaGFuZGxlckNhcmRTdWJtaXQpO1xubmV3Q2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbtGBYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIG5ld0NhcmRQb3B1cC5vcGVuKCk7XG4gIGFkZEZvcm1WYWxpZGF0aW9uLnJlc2V0VmFsaWRhdGlvbigpO1xufSk7XG4iXSwibmFtZXMiOlsiZm9ybSIsImRvY3VtZW50IiwiZm9ybXMiLCJzZWFyY2giLCJyZXN1bHQiLCJxdWVyeVNlbGVjdG9yIiwiZXJyb3IiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImVudGl0eSIsImVudGl0eUlkIiwicHJldmVudERlZmF1bHQiLCJlbGVtZW50cyIsInZhbHVlIiwiZmV0Y2giLCJ0aGVuIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsInRleHQiLCJuYW1lIiwidGV4dENvbnRlbnQiLCJjb25zb2xlIiwibG9nIiwiY2F0Y2giLCJlcnIiLCJyZW5kZXJFcnJvciIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwibiIsImdldHRlciIsIl9fZXNNb2R1bGUiLCJkIiwiYSIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtRWxlbWVudCIsImRhdGFFbGVtZW50IiwidGhpcyIsIl9mb3JtRWxlbWVudCIsIl9kYXRhRWxlbWVudCIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsIl9idXR0b25FbGVtZW50Iiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJpZCIsImNsYXNzTGlzdCIsImFkZCIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJyZW1vdmUiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJzb21lIiwiX3ZhbGlkYXRlSW5wdXQiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiZGlzYWJsZWQiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl9zZXRFdmVudExpc3RlbmVycyIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfcmVuZGVyZWRJdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJpdGVtIiwicHJlcGVuZCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY2xvc2UiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEltYWdlIiwiX25hbWUiLCJfbGluayIsImxpbmsiLCJzcmMiLCJhbHQiLCJQb3B1cFdpdGhGb3JtIiwic3VibWl0Rm9ybSIsIl9mb3JtIiwiX2lucHV0cyIsIl9zdWJtaXRGb3JtIiwidmFsdWVzIiwiZWxlbWVudCIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiVXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJfYWJvdXQiLCJhYm91dFNlbGVjdG9yIiwiYWJvdXQiLCJkYXRhIiwicG9wdXBVc2VyIiwicG9wdXBDYXJkIiwicG9wdXBJbWFnZSIsInByb2ZpbGVCdXR0b24iLCLRgWFyZEJ1dHRvbiIsImNhcmRMaXN0U2VsZWN0b3IiLCJmb3JtRWxlbWVudFVzZXIiLCJmb3JtRWxlbWVudENhcmQiLCJuYW1lRmllbGRFbGVtZW50IiwiYWJvdXRGaWVsZEVsZW1lbnQiLCJmb3JtU2VsZWN0b3IiLCJvcGVuSW1hZ2UiLCJpbWFnZVBvcHVwIiwib3BlbiIsInNldEV2ZW50TGlzdGVuZXJzIiwiY3JlYXRlQ2FyZCIsIkNhcmQiLCJnZW5lcmF0ZUNhcmQiLCJjYXJkTGlzdCIsImNhcmRFbGVtZW50IiwiYWRkSXRlbSIsInJlbmRlckl0ZW0iLCJ1c2VyRm9ybVZhbGlkYXRpb24iLCJhZGRGb3JtVmFsaWRhdGlvbiIsImVuYWJsZVZhbGlkYXRpb24iLCJwcm9maWxlSW5mbyIsInByb2ZpbGVQb3B1cCIsInNldFVzZXJJbmZvIiwicHJvZmlsZUluZm9WYWx1ZXMiLCJnZXRVc2VySW5mbyIsInJlc2V0VmFsaWRhdGlvbiIsImRpc2FibGVkQnV0dG9uIiwibmV3Q2FyZFBvcHVwIl0sInNvdXJjZVJvb3QiOiIifQ==