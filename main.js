(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._host=e,this._token=n}var n,r;return n=t,(r=[{key:"_getHeaders",value:function(){return{authorization:this._token,"content-type":"application/json"}}},{key:"_getJsonOrError",value:function(){return res.ok?res.json():Promise.reject("Ошибка: ".concat(res.status))}},{key:"getInitialCards",value:function(){return this._cards=fetch("".concat(this._url,"/cards"),{headers:this.__getHeaders()}).then(this._getJsonOrError),this._cards}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t.name,this._link=t.link,this._selector=n,this._openImage=r}var t,r;return t=e,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._selector).content.querySelector(".element").cloneNode(!0)}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._imageElement=this._element.querySelector(".element__image"),this._setEventListeners(),this._imageElement.src=this._link,this._imageElement.alt=this._name,this._element.querySelector(".element__city").textContent=this._name,this._element}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".element__like").addEventListener("click",(function(){e._handleLikeClick()})),this._element.querySelector(".element__delete").addEventListener("click",(function(){e._handleDeleteClick()})),this._element.querySelector(".element__image").addEventListener("click",(function(){e._openImage(e._name,e._link)}))}},{key:"_handleLikeClick",value:function(){this._element.querySelector(".element__like").classList.toggle("element__like_active")}},{key:"_handleDeleteClick",value:function(){this._element.remove(),this._element=null}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formElement=t,this._dataElement=n,this._inputList=Array.from(t.querySelectorAll(this._dataElement.inputSelector)),this._buttonElement=this._formElement.querySelector(this._dataElement.submitButtonSelector)}var t,n;return t=e,(n=[{key:"_showInputError",value:function(e,t){var n=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.add(this._dataElement.inputErrorClass),n.textContent=t,n.classList.add(this._dataElement.errorClass)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.remove(this._dataElement.inputErrorClass),t.textContent="",t.classList.remove(this._dataElement.errorClass)}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_validateInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._validateInput()?(this._buttonElement.classList.add(this._dataElement.inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._dataElement.inactiveButtonClass),this._buttonElement.disabled=!1)}},{key:"_setEventListeners",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}},{key:"resetValidation",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){e._hideInputError(t)}))}},{key:"disabledButton",value:function(){this._buttonElement.classList.add(this._dataElement.inactiveButtonClass),this._buttonElement.disabled=!0}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=r,this._renderer=o,this._container=n}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"renderItem",value:function(){var e=this;this._renderedItems.forEach((function(t){e._renderer(t)}))}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=t,this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("mousedown",(function(t){(t.target.classList.contains("popup_opened")||t.target.classList.contains("popup__button-close"))&&e.close()}))}}])&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(){return f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=d(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},f.apply(this,arguments)}function d(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function _(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(r);if(o){var n=h(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return _(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._name=t._popup.querySelector(".popup__caption"),t._link=t._popup.querySelector(".popup__image-src"),t}return t=a,(n=[{key:"open",value:function(e,t){this._link.src=t,this._link.alt=e,this._name.textContent=e,f(h(a.prototype),"open",this).call(this)}}])&&p(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(l);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(){return k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=g(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},k.apply(this,arguments)}function g(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}function E(e,t){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},E(e,t)}function w(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=S(r);if(o){var n=S(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return w(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e))._form=n._popup.querySelector(".popup__form"),n._inputs=n._form.querySelectorAll(".popup__input"),n._submitForm=t,n}return t=a,(n=[{key:"_getInputValues",value:function(){var e={};return this._inputs.forEach((function(t){e[t.name]=t.value})),e}},{key:"setEventListeners",value:function(){var e=this;k(S(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._submitForm(e._getInputValues()),e.close()}))}},{key:"close",value:function(){k(S(a.prototype),"close",this).call(this),this._form.reset()}}])&&b(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(l);function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var C=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(t.nameSelector),this._about=document.querySelector(t.aboutSelector)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,about:this._about.textContent}}},{key:"setUserInfo",value:function(e){this._name.textContent=e.name,this._about.textContent=e.about}}])&&j(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),L=(document.querySelectorAll(".popup"),document.querySelector(".popup_profile")),P=document.querySelector(".popup_new-card"),q=document.querySelector(".popup_image"),I=document.querySelector(".profile__button-edit"),x=document.querySelector(".profile__button-edd"),R=document.querySelector(".elements"),B=document.querySelector(".popup__form"),T=document.querySelector(".popup__form_new-card"),V=B.querySelector(".popup__input-name"),D=B.querySelector(".popup__input-about"),A={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error-visible"},U=new t({host:"https://mesto.nomoreparties.co/v1/cohort-47",token:"57fe7532-adaf-4e02-b40f-30da1bce78cd"}),z=function(e,t){F.open(e,t)},F=new m(q);F.setEventListeners();var H=function(e){return new r(e,"#element-template",z).generateCard()},J=new u({items:[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],renderer:function(e){var t=H(e);J.addItem(t)}},R);J.renderItem();var M=new i(B,A),N=new i(T,A);M.enableValidation(),N.enableValidation();var G=new C({nameSelector:".profile__user-name",aboutSelector:".profile__user-about"}),K=new O(L,(function(e){G.setUserInfo(e)}));K.setEventListeners(),I.addEventListener("click",(function(){K.open();var e=G.getUserInfo();V.value=e.name,D.value=e.about,M.resetValidation(),M.disabledButton()}));var Q=new O(P,(function(e){var t=H(e);J.addItem(t),Q.close()}));Q.setEventListeners(),x.addEventListener("click",(function(){Q.open(),N.resetValidation()})),Promise.all([U.getInitialCards()]).then((function(e){J.renderItem(e)})).catch((function(e){return console.log(e)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFNBQUMvRixHQUM1QnVILEVBQVlFLFlBQVl6SCxFQUN6QixJQUdEd0gsRUFBYVgsb0JBRWJYLEVBQWM5RSxpQkFBaUIsU0FBUyxXQUN0Q29HLEVBQWFaLE9BQ2IsSUFBTWMsRUFBb0JILEVBQVlJLGNBQ3RDcEIsRUFBaUJsQixNQUFRcUMsRUFBa0J0SCxLQUMzQ29HLEVBQWtCbkIsTUFBUXFDLEVBQWtCNUIsTUFDNUNzQixFQUFtQlEsa0JBQ25CUixFQUFtQlMsZ0JBQ3BCLElBRUQsSUFNTUMsRUFBZSxJQUFJaEQsRUFBY2tCLEdBTmIsU0FBQ2hHLEdBQ3pCLElBQU1pSCxFQUFjSCxFQUFXOUcsR0FDL0JnSCxFQUFTRSxRQUFRRCxHQUNqQmEsRUFBYXBELE9BQ2QsSUFHRG9ELEVBQWFqQixvQkFFYlYsRUFBVy9FLGlCQUFpQixTQUFTLFdBQ25DMEcsRUFBYWxCLE9BQ2JTLEVBQWtCTyxpQkFDbkIsSUFFRHZJLFFBQVEwSSxJQUFJLENBQUNyQixFQUFJc0Isb0JBQ2hCbkksTUFBSyxTQUFDbUUsR0FDTGdELEVBQVNHLFdBQVduRCxFQUNyQixJQUFFaUUsT0FBTSxTQUFDQyxHQUFELE9BQVNDLFFBQVFDLElBQUlGLEVBQXJCLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKGhvc3QsIHRva2VuKSB7XG4gICAgdGhpcy5faG9zdCA9IGhvc3Q7XG4gICAgdGhpcy5fdG9rZW4gPSB0b2tlbjtcbiAgfVxuXG4gIC8vINCe0L/RgtC40LzQuNC30LDRhtC40Y8g0LrQvtC00LAsINCy0YvQvdC+0YHQuNC8IGhlYWRlcnMg0LIg0L/RgNC40LLQsNGC0L3Ri9C5INC80LXRgtC+0LRcbiAgX2dldEhlYWRlcnMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX3Rva2VuLFxuICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgfTtcbiAgfVxuXG4gIC8vINCf0YDQuNCy0LDRgtC90YvQuSDQvNC10YLQvtC0INC+0LHRgNCw0LHQvtGC0LrQuCDQvtGC0LLQtdGC0LBcbiAgX2dldEpzb25PckVycm9yKCkge1xuICAgIGlmIChyZXMub2spIHtcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgIH1cbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xuICB9XG5cbiAgLy8g0JfQsNCz0YDRg9C30LrQsCDQutCw0YDRgtC+0YfQtdC6INGBINGB0LXRgNCy0LXRgNCwXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICB0aGlzLl9jYXJkcyA9IGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHNgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9fZ2V0SGVhZGVycygpLFxuICAgIH0pLnRoZW4odGhpcy5fZ2V0SnNvbk9yRXJyb3IpO1xuICAgIHJldHVybiB0aGlzLl9jYXJkcztcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKGRhdGEsIHNlbGVjdG9yLCBvcGVuSW1hZ2UpIHtcbiAgICAvLyDQv9C10YDQtdC00LDQtdC8INC60L7QvdGB0YLRgNGD0LrRgtC+0YDRgyDQv9Cw0YDQsNC80LXRgtGA0YtcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5fc2VsZWN0b3IgPSBzZWxlY3RvcjtcbiAgICB0aGlzLl9vcGVuSW1hZ2UgPSBvcGVuSW1hZ2U7XG4gIH1cblxuICAvLyDQt9Cw0LHQuNGA0LDQtdC8INGA0LDQt9C80LXRgtC60YMg0LrQsNGA0YLQvtGH0LrQuCDQuNC3IEhUTUwsINC60LvQvtC90LjRgNGD0LXQvCDRjdC70LXQvNC10L3RgiDQuCDQstC+0LfQstGA0LDRidCw0LXQvCDRjdC70LXQvNC10L3RgiDQutCw0YDRgtC+0YfQutC4XG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICBjb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICByZXR1cm4gY2FyZFRlbXBsYXRlO1xuICB9XG5cbiAgLy8g0LfQsNCx0LjRgNCw0LXQvCBuYW1lINC4IGxpbmsg0LjQtyDQvNCw0YHRgdC40LLQsCDQuCDQs9C+0YLQvtCy0LjQvCDQutCw0YDRgtC+0YfQutGDINC6INC/0YPQsdC70LjQutCw0YbQuNC4XG4gIGdlbmVyYXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9faW1hZ2VcIik7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTsgLy8g0LTQvtCx0LDQstC70Y/QtdC8INC+0LHRgNCw0LHQvtGC0YfQuNC60LhcblxuICAgIHRoaXMuX2ltYWdlRWxlbWVudC5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2ltYWdlRWxlbWVudC5hbHQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19jaXR5XCIpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcblxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9XG5cbiAgLy8g0LzQtdGC0L7QtCDQtNC70Y8g0YPRgdGC0LDQvdC+0LLQutC4INGB0LvRg9GI0LDRgtC10LvQtdC5INGB0L7QsdGL0YLQuNC5XG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9lbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19saWtlXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrKCk7XG4gICAgICB9KTtcblxuICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2RlbGV0ZVwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrKCk7XG4gICAgICB9KTtcblxuICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2ltYWdlXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fb3BlbkltYWdlKHRoaXMuX25hbWUsIHRoaXMuX2xpbmspO1xuICAgICAgfSk7XG4gIH1cblxuICAvLyDQvNC10YLQvtC0INC00LvRjyDQuNC30LzQtdC90LXQvdC40Y8g0LrQu9Cw0YHRgdCwINC70LDQudC60LBcbiAgX2hhbmRsZUxpa2VDbGljaygpIHtcbiAgICB0aGlzLl9lbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19saWtlXCIpXG4gICAgICAuY2xhc3NMaXN0LnRvZ2dsZShcImVsZW1lbnRfX2xpa2VfYWN0aXZlXCIpO1xuICB9XG5cbiAgLy8g0LzQtdGC0L7QtCDQtNC70Y8g0YPQtNCw0LvQtdC90LjRjyDQutCw0YDRgtC+0YfQutC4XG4gIF9oYW5kbGVEZWxldGVDbGljaygpIHtcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xuICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xuICB9XG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKGZvcm1FbGVtZW50LCBkYXRhRWxlbWVudCkge1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gICAgdGhpcy5fZGF0YUVsZW1lbnQgPSBkYXRhRWxlbWVudDtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxuICAgICAgZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9kYXRhRWxlbWVudC5pbnB1dFNlbGVjdG9yKVxuICAgICk7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB0aGlzLl9kYXRhRWxlbWVudC5zdWJtaXRCdXR0b25TZWxlY3RvclxuICAgICk7XG4gIH1cblxuICAvLyDQvNC10YLQvtC0INC00LvRjyDQvtGC0L7QsdGA0LDQttC10L3QuNGPINC+0YjQuNCx0LrQuCDQstCy0L7QtNCwXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2RhdGFFbGVtZW50LmlucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2RhdGFFbGVtZW50LmVycm9yQ2xhc3MpO1xuICB9XG5cbiAgLy8g0LzQtdGC0L7QtCDQtNC70Y8g0YHQutGA0YvRgtC40Y8g0L7RiNC40LHQutC4INCy0LLQvtC00LBcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2RhdGFFbGVtZW50LmlucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9kYXRhRWxlbWVudC5lcnJvckNsYXNzKTtcbiAgfVxuXG4gIC8vINC80LXRgtC+0LQg0LTQu9GPINC/0YDQvtCy0LXRgNC60Lgg0LLQsNC70LjQtNC90L7RgdGC0Ywg0LLQstC+0LTQsFxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgLy8g0LTQvtCx0LDQstC70LXQvdC40LUg0L7QsdGA0LDQsdC+0YLRh9C40LrQvtCyINGB0L7QsdGL0YLQuNC5INC6INC/0L7Qu9GP0Lwg0YTQvtGA0LzRi1xuICBfdmFsaWRhdGVJbnB1dCgpIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgLy8g0JXRgdC70Lgg0L/QvtC70LUg0L3QtSDQstCw0LvQuNC00L3Qviwg0LrQvtC70LHRjdC6INCy0LXRgNC90ZHRgiB0cnVlLCDQvtCx0YXQvtC0INC80LDRgdGB0LjQstCwINC/0YDQtdC60YDQsNGC0LjRgtGB0Y8g0Lgg0LzQtdGC0L7QtCB2YWxpZGF0ZUlucHV0INCy0LXRgNC90ZHRgiB0cnVlXG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgICB9KTtcbiAgfVxuXG4gIC8vINC80LXRgtC+0LQg0L/QtdGA0LXQutC70Y7Rh9C10L3QuNGPINGB0L7RgdGC0L7Rj9C90LjRjyDQutC90L7Qv9C60LhcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIC8vINCV0YHQu9C4INC10YHRgtGMINGF0L7RgtGPINCx0Ysg0L7QtNC40L0g0L3QtdCy0LDQu9C40LTQvdGL0Lkg0LjQvdC/0YPRglxuICAgIGlmICh0aGlzLl92YWxpZGF0ZUlucHV0KCkpIHtcbiAgICAgIC8vINGB0LTQtdC70LDQuSDQutC90L7Qv9C60YMg0L3QtdCw0LrRgtC40LLQvdC+0LlcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9kYXRhRWxlbWVudC5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyDQuNC90LDRh9C1INGB0LTQtdC70LDQuSDQutC90L7Qv9C60YMg0LDQutGC0LjQstC90L7QuVxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2RhdGFFbGVtZW50LmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8vINC80LXRgtC+0LQg0L/RgNC40L3QuNC80LDQtdGCINC/0LDRgNCw0LzQtdGC0YDQvtC8INGN0LvQtdC80LXQvdGCINGE0L7RgNC80Ysg0Lgg0LTQvtCx0LDQstC70Y/QtdGCINC/0L7Qu9GP0Lwg0L3Rg9C20L3Ri9C1INC+0LHRgNCw0LHQvtGC0YfQuNC60LhcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIC8vIC8vINCf0YDQvtCy0LXRgNC60LAg0YHQvtGB0YLQvtGP0L3QuNGPINC60L3QvtC/0LrQuCDQsiDRgdCw0LzQvtC8INC90LDRh9Cw0LvQtVxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG5cbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgLy8g0LLRi9C30YvQstCw0LXQvCDQvNC10YLQvtC7INC/0YDQvtCy0LXRgNC60Lgg0LLQsNC70LjQtNC90L7RgdGC0Lgg0LLQstC+0LTQsCwg0L/QtdGA0LXQtNCw0LLQsNGPINGE0L7RgNC80YMg0Lgg0L/RgNC+0LLQtdGA0Y/QtdC80YvQuSDRjdC70LXQvNC10L3RglxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgLy8g0J/RgNC+0LLQtdGA0LrQsCDRgdC+0YHRgtC+0Y/QvdC40Y8g0LrQvdC+0L/QutC4INC/0YDQuCDQuNC30LzQtdC90LXQvdC40Lgg0LvRjtCx0L7Qs9C+INC40Lcg0L/QvtC70LXQuVxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvLyDQvNC10YLQvtC0INC+0YfQuNGJ0LDQtdGCINC+0YjQuNCx0LrQuCDQuCDQsdC70L7QutC40YDRg9C10YIg0LrQvdC+0L/QutGDXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSlcbiAgfVxuXG4gIGRpc2FibGVkQnV0dG9uKCkge1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9kYXRhRWxlbWVudC5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gY29udGFpbmVyU2VsZWN0b3I7XG4gIH1cblxuICBhZGRJdGVtKGl0ZW0pIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChpdGVtKTtcbiAgfVxuXG4gIHJlbmRlckl0ZW0oKSB7XG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcG9wdXAgPSBwb3B1cFNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIF9oYW5kbGVFc2NDbG9zZShlKSB7XG4gICAgaWYgKGUua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGUpID0+IHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX29wZW5lZFwiKSB8fFxuICAgICAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX19idXR0b24tY2xvc2VcIilcbiAgICAgICAgKSB7XG4gICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fbmFtZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2NhcHRpb25cIik7XG4gICAgdGhpcy5fbGluayA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlLXNyY1wiKTtcbiAgfVxuXG4gIG9wZW4obmFtZSwgbGluaykge1xuICAgIHRoaXMuX2xpbmsuc3JjID0gbGluaztcbiAgICB0aGlzLl9saW5rLmFsdCA9IG5hbWU7XG4gICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvciwgc3VibWl0Rm9ybSkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xuICAgIHRoaXMuX2lucHV0cyA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9faW5wdXRcIik7XG4gICAgdGhpcy5fc3VibWl0Rm9ybSA9IHN1Ym1pdEZvcm07XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgdmFsdWVzID0ge307XG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICB2YWx1ZXNbZWxlbWVudC5uYW1lXSA9IGVsZW1lbnQudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIHZhbHVlcztcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9zdWJtaXRGb3JtKHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XG4gIH1cblxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICAgIGNvbnN0cnVjdG9yIChvYmopIHtcbiAgICAgICAgdGhpcy5fbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iob2JqLm5hbWVTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX2Fib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihvYmouYWJvdXRTZWxlY3Rvcik7XG4gICAgfVxuXG4gICAgZ2V0VXNlckluZm8oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuYW1lOiB0aGlzLl9uYW1lLnRleHRDb250ZW50LFxuICAgICAgICAgICAgYWJvdXQ6IHRoaXMuX2Fib3V0LnRleHRDb250ZW50LFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0VXNlckluZm8oZGF0YSkge1xuICAgICAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICAgICAgICB0aGlzLl9hYm91dC50ZXh0Q29udGVudCA9IGRhdGEuYWJvdXQ7XG4gICAgfVxufSIsImV4cG9ydCBjb25zdCBwb3B1cHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwXCIpO1xuZXhwb3J0IGNvbnN0IHBvcHVwVXNlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfcHJvZmlsZVwiKTtcbmV4cG9ydCBjb25zdCBwb3B1cENhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX25ldy1jYXJkXCIpO1xuZXhwb3J0IGNvbnN0IHBvcHVwSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX2ltYWdlXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2J1dHRvbi1lZGl0XCIpO1xuZXhwb3J0IGNvbnN0INGBYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19idXR0b24tZWRkXCIpO1xuZXhwb3J0IGNvbnN0IGNhcmRMaXN0U2VsZWN0b3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzXCIpO1xuZXhwb3J0IGNvbnN0IGZvcm1FbGVtZW50VXNlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XG5leHBvcnQgY29uc3QgZm9ybUVsZW1lbnRDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybV9uZXctY2FyZFwiKTtcbmV4cG9ydCBjb25zdCBuYW1lRmllbGRFbGVtZW50ID0gZm9ybUVsZW1lbnRVc2VyLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2lucHV0LW5hbWVcIik7XG5leHBvcnQgY29uc3QgYWJvdXRGaWVsZEVsZW1lbnQgPSBmb3JtRWxlbWVudFVzZXIucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW5wdXQtYWJvdXRcIik7XG5cbmV4cG9ydCBjb25zdCBkYXRhRWxlbWVudCA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5wb3B1cF9fZm9ybVwiLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19idXR0b25cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fYnV0dG9uX2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcInBvcHVwX19lcnJvci12aXNpYmxlXCIsXG59O1xuXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogXCLQkNGA0YXRi9C3XCIsXG4gICAgbGluazogXCJodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvYXJraHl6LmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCLQp9C10LvRj9Cx0LjQvdGB0LrQsNGPINC+0LHQu9Cw0YHRgtGMXCIsXG4gICAgbGluazogXCJodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvY2hlbHlhYmluc2stb2JsYXN0LmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCLQmNCy0LDQvdC+0LLQvlwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2l2YW5vdm8uanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcItCa0LDQvNGH0LDRgtC60LBcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9rYW1jaGF0a2EuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcItCl0L7Qu9C80L7Qs9C+0YDRgdC60LjQuSDRgNCw0LnQvtC9XCIsXG4gICAgbGluazogXCJodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQva2hvbG1vZ29yc2t5LXJheW9uLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCLQkdCw0LnQutCw0LtcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9iYWlrYWwuanBnXCIsXG4gIH0sXG5dOyIsImltcG9ydCBcIi4vLi4vcGFnZXMvaW5kZXguY3NzXCI7XG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IHtcbiAgcG9wdXBVc2VyLFxuICBwb3B1cENhcmQsXG4gIHBvcHVwSW1hZ2UsXG4gIHByb2ZpbGVCdXR0b24sXG4gINGBYXJkQnV0dG9uLFxuICBjYXJkTGlzdFNlbGVjdG9yLFxuICBmb3JtRWxlbWVudFVzZXIsXG4gIGZvcm1FbGVtZW50Q2FyZCxcbiAgbmFtZUZpZWxkRWxlbWVudCxcbiAgYWJvdXRGaWVsZEVsZW1lbnQsXG4gIGRhdGFFbGVtZW50LFxuICBpbml0aWFsQ2FyZHMsXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcblxuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGhvc3Q6IFwiaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC00N1wiLFxuICB0b2tlbjogXCI1N2ZlNzUzMi1hZGFmLTRlMDItYjQwZi0zMGRhMWJjZTc4Y2RcIlxufSlcblxuY29uc3Qgb3BlbkltYWdlID0gKG5hbWUsIGxpbmspID0+IHtcbiAgaW1hZ2VQb3B1cC5vcGVuKG5hbWUsIGxpbmspO1xufTtcblxuY29uc3QgaW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShwb3B1cEltYWdlKTtcbmltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgY3JlYXRlQ2FyZCA9IChkYXRhKSA9PiB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChkYXRhLCBcIiNlbGVtZW50LXRlbXBsYXRlXCIsIG9wZW5JbWFnZSk7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xufVxuXG5jb25zdCBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uKFxuICB7XG4gICAgaXRlbXM6IGluaXRpYWxDYXJkcyxcbiAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChpdGVtKTtcbiAgICAgIGNhcmRMaXN0LmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xuICAgIH0sXG4gIH0sXG4gIGNhcmRMaXN0U2VsZWN0b3Jcbik7XG5jYXJkTGlzdC5yZW5kZXJJdGVtKCk7XG5cbmNvbnN0IHVzZXJGb3JtVmFsaWRhdGlvbiA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1FbGVtZW50VXNlciwgZGF0YUVsZW1lbnQpO1xuY29uc3QgYWRkRm9ybVZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtRWxlbWVudENhcmQsIGRhdGFFbGVtZW50KTtcbnVzZXJGb3JtVmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XG5hZGRGb3JtVmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmNvbnN0IHByb2ZpbGVJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgbmFtZVNlbGVjdG9yOiBcIi5wcm9maWxlX191c2VyLW5hbWVcIixcbiAgYWJvdXRTZWxlY3RvcjogXCIucHJvZmlsZV9fdXNlci1hYm91dFwiLFxufSlcblxuY29uc3QgaGFuZGxlclByb2ZpbGVTdWJtaXQgPSAoZGF0YSkgPT4ge1xuICBwcm9maWxlSW5mby5zZXRVc2VySW5mbyhkYXRhKTtcbn07XG5cbmNvbnN0IHByb2ZpbGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHBvcHVwVXNlciwgaGFuZGxlclByb2ZpbGVTdWJtaXQpO1xucHJvZmlsZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbnByb2ZpbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgcHJvZmlsZVBvcHVwLm9wZW4oKTtcbiAgY29uc3QgcHJvZmlsZUluZm9WYWx1ZXMgPSBwcm9maWxlSW5mby5nZXRVc2VySW5mbygpO1xuICBuYW1lRmllbGRFbGVtZW50LnZhbHVlID0gcHJvZmlsZUluZm9WYWx1ZXMubmFtZTtcbiAgYWJvdXRGaWVsZEVsZW1lbnQudmFsdWUgPSBwcm9maWxlSW5mb1ZhbHVlcy5hYm91dDtcbiAgdXNlckZvcm1WYWxpZGF0aW9uLnJlc2V0VmFsaWRhdGlvbigpO1xuICB1c2VyRm9ybVZhbGlkYXRpb24uZGlzYWJsZWRCdXR0b24oKTtcbn0pO1xuXG5jb25zdCBoYW5kbGVyQ2FyZFN1Ym1pdCA9IChkYXRhKSA9PiB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChkYXRhKTtcbiAgY2FyZExpc3QuYWRkSXRlbShjYXJkRWxlbWVudCk7XG4gIG5ld0NhcmRQb3B1cC5jbG9zZSgpO1xufTtcblxuY29uc3QgbmV3Q2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0ocG9wdXBDYXJkLCBoYW5kbGVyQ2FyZFN1Ym1pdCk7XG5uZXdDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxu0YFhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgbmV3Q2FyZFBvcHVwLm9wZW4oKTtcbiAgYWRkRm9ybVZhbGlkYXRpb24ucmVzZXRWYWxpZGF0aW9uKCk7XG59KTtcblxuUHJvbWlzZS5hbGwoW2FwaS5nZXRJbml0aWFsQ2FyZHMoKV0pXG4udGhlbigoaXRlbSkgPT4ge1xuICBjYXJkTGlzdC5yZW5kZXJJdGVtKGl0ZW0pO1xufSkuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSkiXSwibmFtZXMiOlsiQXBpIiwiaG9zdCIsInRva2VuIiwidGhpcyIsIl9ob3N0IiwiX3Rva2VuIiwiYXV0aG9yaXphdGlvbiIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJfY2FyZHMiLCJmZXRjaCIsIl91cmwiLCJoZWFkZXJzIiwiX19nZXRIZWFkZXJzIiwidGhlbiIsIl9nZXRKc29uT3JFcnJvciIsIkNhcmQiLCJkYXRhIiwic2VsZWN0b3IiLCJvcGVuSW1hZ2UiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfc2VsZWN0b3IiLCJfb3BlbkltYWdlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9lbGVtZW50IiwiX2dldFRlbXBsYXRlIiwiX2ltYWdlRWxlbWVudCIsIl9zZXRFdmVudExpc3RlbmVycyIsInNyYyIsImFsdCIsInRleHRDb250ZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVMaWtlQ2xpY2siLCJfaGFuZGxlRGVsZXRlQ2xpY2siLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJyZW1vdmUiLCJGb3JtVmFsaWRhdG9yIiwiZm9ybUVsZW1lbnQiLCJkYXRhRWxlbWVudCIsIl9mb3JtRWxlbWVudCIsIl9kYXRhRWxlbWVudCIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsIl9idXR0b25FbGVtZW50Iiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJpZCIsImFkZCIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJzb21lIiwiX3ZhbGlkYXRlSW5wdXQiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiZGlzYWJsZWQiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfcmVuZGVyZWRJdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJpdGVtIiwicHJlcGVuZCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZSIsImtleSIsImNsb3NlIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhJbWFnZSIsIlBvcHVwV2l0aEZvcm0iLCJzdWJtaXRGb3JtIiwiX2Zvcm0iLCJfaW5wdXRzIiwiX3N1Ym1pdEZvcm0iLCJ2YWx1ZXMiLCJlbGVtZW50IiwidmFsdWUiLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiVXNlckluZm8iLCJvYmoiLCJuYW1lU2VsZWN0b3IiLCJfYWJvdXQiLCJhYm91dFNlbGVjdG9yIiwiYWJvdXQiLCJwb3B1cFVzZXIiLCJwb3B1cENhcmQiLCJwb3B1cEltYWdlIiwicHJvZmlsZUJ1dHRvbiIsItGBYXJkQnV0dG9uIiwiY2FyZExpc3RTZWxlY3RvciIsImZvcm1FbGVtZW50VXNlciIsImZvcm1FbGVtZW50Q2FyZCIsIm5hbWVGaWVsZEVsZW1lbnQiLCJhYm91dEZpZWxkRWxlbWVudCIsImZvcm1TZWxlY3RvciIsImFwaSIsImltYWdlUG9wdXAiLCJvcGVuIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJjcmVhdGVDYXJkIiwiZ2VuZXJhdGVDYXJkIiwiY2FyZExpc3QiLCJjYXJkRWxlbWVudCIsImFkZEl0ZW0iLCJyZW5kZXJJdGVtIiwidXNlckZvcm1WYWxpZGF0aW9uIiwiYWRkRm9ybVZhbGlkYXRpb24iLCJlbmFibGVWYWxpZGF0aW9uIiwicHJvZmlsZUluZm8iLCJwcm9maWxlUG9wdXAiLCJzZXRVc2VySW5mbyIsInByb2ZpbGVJbmZvVmFsdWVzIiwiZ2V0VXNlckluZm8iLCJyZXNldFZhbGlkYXRpb24iLCJkaXNhYmxlZEJ1dHRvbiIsIm5ld0NhcmRQb3B1cCIsImFsbCIsImdldEluaXRpYWxDYXJkcyIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyJdLCJzb3VyY2VSb290IjoiIn0=